<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
</body>
<script>
    // 在实现双向绑定之前要先学习一下“订阅/发布模式”。订阅发布模式（又称为观察者模式）定义一种一对多的关系，让多个观察者同时监听一个主题对象，主题对象状态发生改变的时候观察者都会得到通知。

    // 发布者发出通知 => 主题对象收到通知并推送给订阅者 => 订阅者执行相应的操作

    // 看下面的代码：

    /**
    * 定义一个发布者publisher
    * */
    var pub = {
        publish: function () {
            dep.notify();
        }
    }
    /**
     * 三个订阅者
     * */
    var sub1 = {
        update: function () {
            console.log(1);
        }
    };
    var sub2 = {
        update: function () {
            console.log(2);
        }
    };
    var sub3 = {
        update: function () {
            console.log(3);
        }
    }
    /**
     * 一个主题对象
     * */
    function Dep() {
        this.subs = [sub1, sub2, sub3];
    }
    Dep.prototype.notify = function () {
        this.subs.forEach(function (sub) {
            sub.update();
        })
    }
    // 发布者发布消息，主题对象执行notifiy方法，触发所有订阅者响应，执行update
    var dep = new Dep();
    pub.publish();
    /*
    1. 定义发布者对象pub，对象中定义publish方法，方法调用主题对象实例dep的notify()方法
    2. 定义三个订阅者对象，对象中定义update方法，三个对象的update方法分别输出1，2，3
    3. 定义一个主题方法类，主题对象中定义数组属性subs，包含三个订阅者对象
    4. 在主题方法类的原型对象上定义通知方法notify，方法中循环调用三个订阅者对象的update()方法
    5. 实例化主题方法类得到实例dep
    6. 调用发布者对象的通知方法notifiy()，分别输出1，2，3
    */

    

</script>

</html>